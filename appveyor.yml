version: 1.0.{build}

clone_folder: c:\dev\lib-template-cmake

os:
  - Visual Studio 2013
  - Visual Studio 2015
  
install:

build:

build_script:
  # download and install  YCM 
  - cd c:\dev
  - git clone https://github.com/robotology/ycm
  - cd ycm 
  - md build
  - cd build 
  - cmake ..
  - cmake --build . --config Release 
  - cmake --build . --config Release --target INSTALL
  # build the library 
  - cd c:\dev\lib-template-cmake
  - md build
  - cd build
  - cmake -DBUILD_TESTING:BOOL=ON -DCMAKE_CXX_FLAGS:STRING="/W4" ..
  # build the library for Release and Debug
  - cmake --build . --config Debug 
  - cmake --build . --config Release 
  
after_build:
  # Install only release 
  - cmd: cmake --build C:\dev\lib-template-cmake\build --config Release --target INSTALL
  
test_script:
  - cmd: ctest -C Debug -VV
  - cmd: ctest -C Release -VV
